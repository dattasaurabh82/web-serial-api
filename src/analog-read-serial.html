    <title>Analog Read Serial</title>
    <style>
      .tile {
        font-size: 6em;
      }

      .rabbit {
        position: absolute;
      }

      .carrot {
        float: right;
      }
    </style>
  </head>
  <body>
    <img src="sven.png" alt="" width="105" height="105" />
    <p class="bubble">
      Hi there, kids! Let's play together with bunnies, carrots, and the Web Serial API.
    </p>

    <noscript>
      <p class="notice bubble">
        I'm sorry! For this to actully work you have to enable JavaScript in your browser.
      </p>
    </noscript>

    <figure>
        <div class="demo bubble"><span class="rabbit tile">🐰</span><span class="carrot tile">🥕</span></div>
        <figcaption>What a tasty looking snack!<br /><small>The carrot is <span>0</span> % threatened.</small></figcaption>
    </figure>

    <script>
      let lineBuffer = '';
      let latestValue = 0;

      function renderDemo() {
        const rabbit = document.querySelector('.rabbit');
        const percentage = Math.floor(latestValue / 1023 * 100);
        const percentageStatus = document.querySelector('figcaption span');

        rabbit.style.left = 'calc(' + percentage + '% - 2em)';
        percentageStatus.innerText = percentage;

        window.requestAnimationFrame(renderDemo);
      }
      window.requestAnimationFrame(renderDemo);

      const appendStream = new WritableStream({
        write(chunk) {
          lineBuffer += chunk;

          let lines = lineBuffer.split('\n');

          if (lines.length > 1) {
            lineBuffer = lines.pop();
            latestValue = parseInt(lines.pop().trim());
          }
        }
      });

      async function getReader() {
        const port = await navigator.serial.requestPort({});
        await port.open({ baudrate: 9600 });

        connectButton.innerText = '🔌 Disconnect';

        port.readable
          .pipeThrough(new TextDecoderStream())
          .pipeTo(appendStream);
      }
    </script>
